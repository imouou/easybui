"use strict";
var _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
    return typeof e
} : function(e) {
    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
};
! function(N, D) {
    N.extend({
        name: "calendar",
        config: {
            id: "",
            uid: "",
            appendTo: "",
            pageId: "",
            trigger: "",
            type: "select",
            handle: ".bui-calendar-date",
            title: "请选择日期",
            placeholder: "M-d",
            holiday: null,
            holidayText: ["班", "休"],
            display: "year",
            prevSize: 1,
            size: 2,
            chineseDate: null,
            formate: "yyyy/M/d",
            formateValue: "M-d",
            interval: 1,
            selected: null,
            disabled: null,
            width: "100%",
            height: "70%",
            fullscreen: !1,
            autonext: !0,
            autoprev: !1,
            isEnd: !0,
            position: "bottom",
            effect: "",
            popup: !0,
            zoom: !1,
            selectedText: [],
            needSelectLess: !1,
            onSelect: null,
            onReset: null,
            onChange: null,
            onSelectStart: null,
            onSelectEnd: null,
            onInited: null,
            unit: "",
            priceUnit: "￥",
            value: "",
            column: 7,
            week: ["日", "一", "二", "三", "四", "五", "六"],
            weekText: ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"],
            onOpenDialog: null,
            zIndex: 101
        },
        callback: function(s) {
            function t(e) {
                var t = e.currentTarget,
                    a = t.scrollTop || 0,
                    n = "after" !== H.display && H.autoprev;
                0 == a ? (n && j.prepend(), n && j.scrollto(12)) : t.scrollTop + t.clientHeight >= (t && t.scrollHeight - 1) && H.autonext && j.append()
            }
            var n, r, c, j = this,
                H = j.config,
                i = null,
                L = H.weekText,
                u = null,
                d = null,
                f = null,
                o = new Date,
                l = null,
                p = "",
                h = "",
                v = N.guid(),
                m = [],
                P = [],
                y = {
                    start: "",
                    startText: "",
                    startWeek: "",
                    startIndex: 0,
                    value: "",
                    end: "",
                    count: 0,
                    endText: "",
                    endWeek: "",
                    endIndex: 0,
                    status: 0
                },
                A = 0,
                b = null,
                g = null,
                x = null,
                k = null;
            j.init = function(e) {
                H = j.config = e = D.extend(!0, {}, j.config, e);
                var t = "body" === e.appendTo ? D : N.$;
                o = N.date.format(new Date, e.formate), l = N.date.convert(o), A = l.getTime(), r = l.getFullYear(), n = l.getFullYear(), p = bui.date.format(o, "yyyy-M-1"), h = o, c = e.value ? N.date.format(e.value, e.formate) : o, d = N.$(e.trigger), i = "year" === e.display ? j.getFullYearData(o, "push", e.display) : j.getAfterData(o, "push", H.size), i = j.mergeChineseDate({
                    data: i,
                    chineseDate: e.chineseDate
                }), i = j.mergeHoliday(e.holiday, i), i = j.mergePrice(e.price, i);
                var a = "";
                if (e.id) a = j.templateCalendar(e), (u = t(e.id)).html(a), k = u.find(".bui-calendar-main"), x = k.find(".bui-calendar-main-inner"), j.setHeight(), j.scrollto(l.getMonth() + 1);
                else {
                    if (!e.popup) return void N.showLog("popup:false 时, 必须有id参数");
                    if (e.id = "#" + v, b) return a = j.templateCalendar(e), u.find(".bui-dialog-main").html(a), u = t("#" + v), k = u.find(".bui-calendar-main"), x = k.find(".bui-calendar-main-inner"), g && g.resize(), this;
                    a = this.templateDialog(e), t(e.appendTo || e.pageId || ".bui-page").append(a), u = t("#" + v), k = u.find(".bui-calendar-main"), x = k.find(".bui-calendar-main-inner"), b = bui.dialog({
                        id: "#" + v,
                        width: e.width,
                        height: e.height,
                        position: e.position,
                        effect: e.effect,
                        scroll: !1,
                        zIndex: e.zIndex || 101,
                        useBox: !0,
                        fullscreen: e.fullscreen
                    })
                }
                return "month" === e.display && ((g = N.slide({
                    id: e.id + " .bui-calendar",
                    children: ".bui-calendar-main > .bui-calendar-main-inner",
                    main: ".bui-calendar-main",
                    item: ".bui-calendar-month",
                    prev: ".bui-calendar-prev",
                    next: ".bui-calendar-next",
                    zoom: e.zoom,
                    loop: !1,
                    height: e.height
                })).on("last", function() {
                    e.autonext && j.append()
                }), g.on("first", function() {
                    e.autoprev && j.prepend()
                }), g.on("to", function() {
                    var e = this.index();
                    c = P[e]
                }), !e.popup && j.to(o, "none")), f = u.find(e.handle), d = N.$(e.trigger), j.bind(e), e.disabled && this.disable(e.disabled), e.selected && this.select(e.selected), j.to(o), e.value && this.value(e.value), e.uid && N.history.setUI && N.history.setUI({
                    uid: e.uid,
                    ui: j
                }), this
            }, j.mergeChineseDate = function(i) {
                if (!i.chineseDate) return i.data;
                if ("year" === H.display) return D.extend(!0, {}, i.data, i.chineseDate);
                for (var n = 0, d = Object.keys(i.data), e = function() {
                        for (var r = d[n], e = 0, t = Object.keys(i.data[r]), a = function() {
                                var n = t[e];
                                i.data[r][n].forEach(function(e, t) {
                                    var a = ((i.chineseDate[r] || {})[n] || {})[t] || {};
                                    e.cdate = a.cdate || ""
                                })
                            }; e < t.length; e++) a()
                    }; n < d.length; n++) e();
                return i.data
            }, j.reset = function() {
                return this.cancel(), [], m = [], c = o, this.activeDate(o), H.onReset && H.onReset.call(j), j
            }, j.showprice = function() {
                return k.removeClass("bui-calendar-hideprice"), this
            }, j.hideprice = function() {
                return k.addClass("bui-calendar-hideprice"), this
            }, j.returnDate = function() {
                return this.activeDate(o), o
            }, j.cancel = function() {
                switch (y = {
                        start: "",
                        startText: "",
                        startWeek: "",
                        startIndex: 0,
                        count: 0,
                        value: "",
                        end: "",
                        endText: "",
                        endWeek: "",
                        endIndex: 0,
                        status: 0
                    }, this.emptyText(), H.type) {
                    case "select":
                        f.removeClass("start end active");
                        break;
                    case "click":
                    default:
                        f.removeClass("bui-calendar-current")
                }
                return H.onChange && H.onChange.call(j, event), j
            }, j.bind = function(e) {
                u.off("click.bui", ".bui-calendar-date-space").on("click.bui", ".bui-calendar-date-space", function(e) {
                    j.cancel(), j.returnDate()
                }), u.off("click.bui", e.handle).on("click.bui", e.handle, function(e) {
                    var t = D(this),
                        a = t.attr("data-date"),
                        n = j.value();
                    c = a;
                    var r = n.start ? new Date(n.start).getTime() : A,
                        i = N.date.convert(a).getTime();
                    H.onClick && H.onClick.call(j, e);
                    var d = i < A,
                        o = i < r;
                    if (!H.needSelectLess && d) return console.warn("needSelectLess:false时，不允许选择比今天小的日期"), !1;
                    switch (H.type) {
                        case "multiple":
                            break;
                        case "select":
                            f.removeClass("bui-calendar-current");
                            var l = {
                                start: a,
                                end: N.date.after(a, H.interval, H.formate)
                            };
                            if ((i < r || t.hasClass("start")) && H.isEnd) return j.cancel(), void j.returnDate();
                            switch (y.status) {
                                case 0:
                                    j.pickerStart(a);
                                    break;
                                case 1:
                                case 2:
                                    o ? j.select(l) : j.pickerEnd(a)
                            }
                            H.onSelect && H.onSelect.call(j, a, e);
                            break;
                        case "click":
                        default:
                            r !== i && (j.value(a), H.onChange && H.onChange.call(j, e), H.onSelect && H.onSelect.call(j, a, e))
                    }
                }), d && d.click(function(e) {
                    H.onOpenDialog && H.onOpenDialog.call(j), b && b.open()
                }), (H.autonext || H.autoprev) && "month" != e.display && k.off("scroll", t).on("scroll", t)
            }, j.value = function(e) {
                if (void 0 === e) return y.startText = y.start ? N.date.format(y.start, H.formateValue) : H.placeholder, y.endText = y.end ? N.date.format(y.end, H.formateValue) : H.placeholder, y.startWeek = L[N.date.convert(y.start).getDay()], y.endWeek = L[N.date.convert(y.end).getDay()], y;
                this.select(e)
            }, j.setting = function(e) {
                return "object" === (void 0 === e ? "undefined" : _typeof(e)) && (H = D.extend(!0, {}, H, e)), H
            }, j.setHeight = function(e) {
                var t = N.$("main").height() - u[0].offsetTop - u.find(".bui-calendar-head").height();
                return k.height(e || t), this
            }, j.prepend = function() {
                var e = null;
                "year" === H.display ? (r -= 1, e = j.getFullYearData(r, "unshift")) : (p = this.getPrevLastDate(p), e = j.getAfterData(p, "unshift")), e = j.mergeChineseDate({
                    data: e,
                    chineseDate: s.chineseDate
                }), e = j.mergeHoliday(H.holiday, e, r);
                var t = j.templateMonth(e);
                return x.prepend(t), f = u.find(H.handle), "month" === H.display && g && g.resize(), this
            }, j.getPrevLastDate = function(e, t) {
                t = t || H.prevSize || H.size;
                var a = bui.date.convert(e),
                    n = a.getFullYear(),
                    r = a.getMonth() + 1 - t;
                return (r <= 0 ? n - 1 : n) + "/" + (r <= 0 ? 12 + r : r) + "/1"
            }, j.getLastDate = function(e, t) {
                t = t || H.size;
                var a = bui.date.convert(e),
                    n = a.getFullYear(),
                    r = a.getMonth() + 1 + t;
                return (12 < r ? n + 1 : n) + "/" + (12 < r ? r % 12 : r) + "/1"
            }, j.append = function() {
                var e = null;
                "year" === H.display ? (n += 1, e = j.getFullYearData(n, "push")) : (h = this.getLastDate(h), e = j.getAfterData(h)), e = j.mergeChineseDate({
                    data: e,
                    chineseDate: s.chineseDate
                }), e = j.mergeHoliday(H.holiday, e, n);
                var t = j.templateMonth(e);
                if (x.append(t), f = u.find(H.handle), "month" === H.display && g) {
                    g.resize();
                    var a = g.index();
                    g.to(a + 1, "none")
                }
                return this
            }, j.prevMonth = function() {
                var e = N.date.convert(c),
                    t = e.getFullYear(),
                    a = e.getMonth();
                return c = (t = 0 == a ? t - 1 : t) + "/" + (a = 0 == a ? 12 : a), 0 == N.array.index(P, c) && j.prepend(), j.to(c), this
            }, j.prevYear = function() {
                var e = N.date.convert(c),
                    t = e.getFullYear() - 1;
                j.prepend(), c = t + "/" + (e.getMonth() + 1), j.to(c, "none")
            }, j.activeDate = function(e) {
                if (void 0 === e) return c;
                var t = N.date.format(e, H.formate);
                return f.removeClass("start active bui-calendar-current"), this.find(t).addClass("bui-calendar-current"), c = e, y.value = e, y.start = e, this
            }, j.nextMonth = function() {
                var e = N.date.convert(c),
                    t = e.getFullYear(),
                    a = e.getMonth() + 2;
                c = (t = 13 == a ? t + 1 : t) + "/" + (a = 13 == a ? 1 : a), N.array.index(P, c) == P.length - 1 && j.append(), j.to(c)
            }, j.nextYear = function() {
                var e = N.date.convert(c),
                    t = e.getFullYear() + 1;
                j.append(), c = t + "/" + (e.getMonth() + 1), j.to(c, "none")
            }, j.to = function(e, t) {
                if ("month" === H.display)
                    if ("number" == typeof e) g && g.to(e, t);
                    else {
                        var a = N.date.format(e, "yyyy/M"),
                            n = N.array.index(P, a);
                        g && g.to(n, t)
                    }
                else j.scrollto(e, t)
            }, j.scrollto = function(e, t) {
                var a = "";
                if ("number" == typeof e) a = u.find(".bui-calendar-month-" + e);
                else if ("string" == typeof e) {
                    var n = N.date.convert(e),
                        r = n.getFullYear(),
                        i = n.getMonth() + 1;
                    a = u.find(".bui-calendar-" + r + "-" + i)
                }
                var d = a && a[0] && a[0].offsetTop - u[0].offsetTop - u.find(".bui-calendar-head").height();
                H.popup ? (d = a && a[0].offsetTop, u.find(".bui-dialog-main")[0].scrollTop = d) : k && (k[0].scrollTop = d), "function" == typeof t && t.call(j)
            }, j.select = function(e) {
                return "string" == typeof e ? this.activeDate(e) : "object" === (void 0 === e ? "undefined" : _typeof(e)) && (e.start && this.pickerStart(e.start), e.end && this.pickerEnd(e.end)), e
            }, j.disableSelect = function() {
                return H.type = "click", f.removeClass("start active"), y = {
                    start: "",
                    startText: "",
                    startWeek: "",
                    startIndex: 0,
                    end: "",
                    count: 0,
                    endText: "",
                    endWeek: "",
                    endIndex: 0,
                    status: 0
                }, this
            }, j.enableSelect = function() {
                return H.type = "select", this
            }, j.getType = function() {
                return H.type
            }, j.disable = function(e) {
                "array" === N.typeof(e) ? e.forEach(function(e, t) {
                    j.disableHandle(e)
                }) : "object" === N.typeof(e) && this.disableHandle(e)
            }, j.enable = function(e) {
                "array" === N.typeof(e) ? e.forEach(function(e, t) {
                    j.disableHandle(e, !1)
                }) : "object" === N.typeof(e) && this.disableHandle(e, !1)
            }, j.find = function(e) {
                var t = N.date.format(e, H.formate);
                return u.find('[data-date="' + t + '"]')
            }, j.disableHandle = function(e, t) {
                t = 0 != t;
                var a = N.date.format(e.start, H.formate),
                    n = N.date.format(e.end, H.formate),
                    r = 0,
                    i = N.date.count(a, n).day;
                if (t)
                    for (; r < i; r++) {
                        var d = N.date.after(a, r);
                        !N.array.compare(m, d) && m.push(d), this.find(d).addClass("disabled")
                    } else
                        for (; r <= i; r++) {
                            var o = N.date.after(a, r);
                            N.array.remove(m, o), this.find(o).removeClass("disabled")
                        }
            }, j.emptyText = function() {
                return u.find(".start .bui-calendar-date-foot em").text(""), u.find(".end .bui-calendar-date-foot em").text(""), this
            }, j.pickerStart = function(e, t) {
                var a = N.date.format(e, H.formate),
                    n = N.date.convert(a).getTime();
                return !s.needSelectLess && n < A || N.array.compare(m, a) ? y.status = 0 : (y.status = 1, H.isEnd || (y.status = 0), y.start = a, y.value = a, y.end = "", y.count = 0, this.emptyText(), f.removeClass("start active"), this.find(a).addClass("start active").find(".bui-calendar-date-foot em").text(H.selectedText && H.selectedText[0] || ""), H.onSelectStart && H.onSelectStart.call(j, event)), this
            }, j.pickerEnd = function(e, t) {
                var a = N.date.format(e, H.formate),
                    n = N.date.convert(y.start).getTime(),
                    r = N.date.convert(a).getTime(),
                    i = N.array.compare(m, a),
                    d = n === r;
                if (!s.needSelectLess && r < A || 0 == y.status || i && 0 == y.status && d || i && 2 == y.status && d) return this;
                if (this.include(y)) return j.cancel(), j.select({
                    start: a,
                    end: N.date.after(a, H.interval, H.formate)
                }), !1;
                y.status = 2, y.end = a, y.count = bui.date.count(y.start, a).day || 1, u.find(".end .bui-calendar-date-foot em").text(""), f.removeClass("end active"), this.find(a).addClass("end active").find(".bui-calendar-date-foot em").text(H.selectedText && H.selectedText[1] || "");
                for (var o = 0; o < y.count; o++) {
                    var l = bui.date.after(y.start, o, H.formate);
                    this.find(l).addClass("active")
                }
                return H.onSelectEnd && H.onSelectEnd.call(j, event), H.onChange && H.onChange.call(j, event), this
            }, j.include = function(e) {
                for (var t = e.count, a = 0; a < t; a++) {
                    var n = bui.date.after(e.start, a, H.formate);
                    if (N.array.compare(m, n)) return !0
                }
                return !1
            }, j.mergeHoliday = function(t, l, e) {
                if (!t) return l;
                var a = void 0 === e ? Object.keys(t) : [e];
                return l = l || i, a.forEach(function(o, e) {
                    t[o] && t[o].forEach(function(e, t) {
                        var a = N.date.convert(e.date),
                            n = a.getMonth() + 1,
                            r = (a.getDate(), N.date.format(e.date, H.formate)),
                            i = l["" + o],
                            d = (t = i && i[n] ? N.array.index(i[n], r, "date") : -1, i && i[n] && i[n][t] || {});
                        e.hasOwnProperty("holiday") && (d.holiday = e.holiday), e.hasOwnProperty("holidayName") && (d.holidayName = e.holidayName)
                    })
                }), l
            }, j.mergePrice = function(t, o, e) {
                if (!t) return o;
                var a = void 0 === e ? Object.keys(t) : [e];
                return o = o || i, a.forEach(function(d, e) {
                    t[d] && t[d].forEach(function(e, t) {
                        var a = N.date.convert(e.date),
                            n = a.getMonth() + 1,
                            r = (a.getDate(), N.date.format(e.date, H.formate)),
                            i = o["" + d];
                        t = i && i[n] ? N.array.index(i[n], r, "date") : -1;
                        (i && i[n] && i[n][t] || {}).price = e.price
                    })
                }), o
            };
            var q = !0;
            return j.getAfterData = function(e, t, a) {
                var n = H.display;
                t = t || "push", a = a || ("unshift" === t ? H.prevSize : H.size);
                var r = {},
                    i = e ? N.date.convert(e) : new Date,
                    d = i.getFullYear(),
                    o = i.getMonth() + 1;
                [];
                for (var l = 0; l < a; l++) {
                    var s = "unshift" == t ? o - l : o + l;
                    if (12 < s) {
                        var c = s % 12,
                            u = d + 1;
                        r[u] || (r[u] = {}), r[u][c] = []
                    } else if (s <= 0) {
                        var f = s % 12 + 12,
                            p = d - 1;
                        r[p] || (r[p] = {}), r[p][f] = []
                    } else 0 < s && s <= 12 && (r[d] || (r[d] = {}), r[d][s] = [])
                }
                for (var h = 0, v = Object.keys(r), m = [], y = []; h < v.length; h++)
                    for (var b = v[h], g = r[b], x = Object.keys(g), k = 0; k < x.length; k++) {
                        var D = x[k],
                            w = r[b][D],
                            T = N.date.countMonth(b + "-" + D),
                            S = 0;
                        switch (y.push(b + "/" + D), "push" === t && P[t](b + "/" + D), n) {
                            case "after":
                                for (; S < T; S++) {
                                    var C = {},
                                        I = S + 1;
                                    C.date = N.date.format(b + "/" + D + "/" + I, H.formate);
                                    var M = new Date(C.date);
                                    C.day = "" + I, C.weekIndex = M.getDay(), C.week = L[C.weekIndex], C.cdate = "";
                                    var E = M.getTime() >= A;
                                    if (C.relation = E ? "more" : "less", E) {
                                        if (q) {
                                            var Y = j.fixWeekBefore(C.date);
                                            N.array.merge(w, Y), q = !1
                                        }
                                        M.getTime() == A && (C.relation = "equal"), w.push(C), m.push(C.date)
                                    }
                                }
                                break;
                            case "month":
                            case "year":
                                for (; S < T; S++) {
                                    var z = {},
                                        F = S + 1;
                                    z.date = b + "/" + D + "/" + F;
                                    var O = new Date(z.date);
                                    z.day = "" + F, z.weekIndex = O.getDay(), z.week = L[z.weekIndex];
                                    var W = O.getTime();
                                    W < A ? z.relation = "less" : A <= W && (z.relation = "more", W == A && (z.relation = "equal")), w.push(z), m.push(z.date)
                                }
                        }
                    }
                return "unshift" === t && P.splice.apply(P, [0, 0].concat(y)), r
            }, j.getFullYearData = function(e, t, a) {
                t = t || "push";
                var n = {},
                    r = (e ? N.date.convert(e) : new Date).getFullYear();
                [], n[r] = {
                    1: [],
                    2: [],
                    3: [],
                    4: [],
                    5: [],
                    6: [],
                    7: [],
                    8: [],
                    9: [],
                    10: [],
                    11: [],
                    12: []
                };
                for (var i = Object.keys(n[r]), d = [], o = [], l = 0; l < i.length; l++) {
                    i[l];
                    var s = l + 1,
                        c = n[r][s],
                        u = N.date.countMonth(r + "-" + s),
                        f = 0;
                    for (o.push(r + "/" + s), "push" === t && P[t](r + "/" + s); f < u; f++) {
                        var p = {},
                            h = f + 1;
                        p.date = r + "/" + s + "/" + h;
                        var v = new Date(p.date);
                        p.day = "" + h, p.weekIndex = v.getDay(), p.week = L[p.weekIndex];
                        var m = v.getTime();
                        m < A ? p.relation = "less" : A <= m && (p.relation = "more", m == A && (p.relation = "equal")), c.push(p), d.push(p.date)
                    }
                }
                return "unshift" === t && P.splice.apply(P, [0, 0].concat(o)), n
            }, j.open = function(e) {
                b && b.open(e)
            }, j.close = function(e) {
                b && b.close(e)
            }, j.fixWeekBefore = function(e) {
                for (var t = [], a = N.date.convert(e).getDay(); 0 < a;) {
                    var n = {},
                        r = N.date.after(e, -a, H.formate),
                        i = N.date.convert(r);
                    n.date = r, n.day = i.getDate(), n.weekIndex = i.getDay(), n.week = L[n.weekIndex], n.relation = "less", t.push(n), a--
                }
                return t
            }, j.fixWeekAfter = function(e) {
                for (var t = [], a = N.date.convert(e).getDay(); 0 < a;) {
                    var n = {},
                        r = N.date.after(e, -a, H.formate),
                        i = N.date.convert(r);
                    n.date = r, n.day = i.getDate(), n.weekIndex = i.getDay(), n.week = L[n.weekIndex], n.relation = 1 == a ? "equal" : "less", t.push(n), a--
                }
                return t
            }, j.templateDialog = function(e) {
                var t = j.templateCalendar(e),
                    a = this.templateWeek(e.week);
                return '<div id="' + v + '" class="bui-dialog bui-dialog-calendar">\n                            <div class="bui-dialog-head"><div class="container">' + e.title + "</div>" + a + '</div>\n                            <div class="bui-dialog-main">' + t + '</div>\n                            <div class="bui-dialog-close"><i class="' + N.config.icon.close + '"></i></div>'
            }, j.templateCalendar = function(e) {
                var t = this.templateWeek(e.week),
                    a = this.templateYear(i);
                return '<div class="bui-calendar bui-box-vertical bui-calendar-display-' + e.display + '">\n                            ' + (e.popup ? "" : t) + ' \n                                <div class="bui-calendar-main span1">' + a + "</div>\n                            </div>"
            }, j.templateWeek = function(e) {
                var a = '<div class="bui-calendar-head"><div class="bui-box">';
                return e.forEach(function(e, t) {
                    a += '\n                        <div class="span1' + (0 === t || 6 === t ? " bui-calendar-holiday" : "") + '">' + e + "</div>"
                }), a += "</div></div>"
            }, j.templateDateSpace = function(e) {
                for (var t = "", a = 0; a < e; a++) t += '<div class="span1">\n                        <div class="bui-calendar-date-space">\n                            <span class="bui-calendar-date-head">&nbsp;</span>\n                            <span class="bui-calendar-date-main">&nbsp;</span>\n                            <span class="bui-calendar-date-foot">&nbsp;</span></div>\n                    </div>';
                return t
            }, j.templateYear = function(e) {
                var t = "";
                return t += '<div class="bui-calendar-main-inner">' + this.templateMonth(e) + "</div>"
            }, j.templateMonth = function(i) {
                var d = "";
                return Object.keys(i).forEach(function(r, e) {
                    Object.keys(i[r]).forEach(function(e, t) {
                        var a = i[r][e] || [],
                            n = a.length ? "" : " bui-calendar-empty";
                        d += '<div class="bui-calendar-month bui-calendar-' + r + "-" + e + n + " bui-calendar-month-" + e + n + '" date-date="' + r + "/" + e + '">\n                            <div class="bui-calendar-month-head">' + r + "年" + e + '月</div>\n                            <div class="bui-calendar-month-main">\n                                <div class="bui-fluid-' + H.column + '">\n                                    ' + j.templateDay(a) + "\n                            </div></div>\n                        </div>"
                    })
                }), d
            }, j.templateDay = function(e) {
                var d = "";
                return e && "array" !== bui.typeof(e) || e.forEach(function(e, t) {
                    0 == t && (d += j.templateDateSpace(e.weekIndex));
                    var a = e.date === o ? " bui-calendar-current" : "",
                        n = H.holidayText[e.holiday] || e.holidayName || e.cdate || "",
                        r = e.holiday ? " bui-calendar-holiday-" + (e.holiday || "") : "",
                        i = " bui-calendar-date-" + e.relation;
                    d += '<div class="span1">\n                            <div class="bui-calendar-date' + i + r + a + '" data-date="' + e.date + '">\n                                <span class="bui-calendar-date-head">' + n + '</span>\n                                <span class="bui-calendar-date-main">\n                                    <span>' + (e.day || e.date.split("/")[2]) + "</span>" + H.unit + '\n                                </span>\n                                <span class="bui-calendar-date-foot"><em></em><strong data-price="' + e.price + '">' + (e.price ? e.priceUnit + e.price : "") + "</strong></span>\n                                </div>\n                        </div>"
                }), d
            }, j.init(H), j
        }
    })
}(window.bui || {}, window.libs);